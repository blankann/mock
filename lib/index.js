!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.bmock=n()}(this,function(){"use strict";var t=/^(?:http[s]?:\/\/\S+?)?\/\S+$/,n={isProd:!1,flag:"__MOCK__",key:"url",data:{}};function r(t){return void 0===t}function e(t){return"function"==typeof t}function o(t){return"[object Object]"===Object.prototype.toString.call(t)}function i(t){return t&&e(t.then)}function a(){return!n.isProd&&("boolean"==typeof n.isMock?n.isMock:e(n.isMock)?n.isMock.apply(null,arguments):function(t){try{if(window&&window.location)return new RegExp(`[?&]${t}`).test(window.location.search)}catch(t){}return!1}(n.flag))}function c(t,n){return function(){var r=Array.prototype.slice.call(arguments),e=n.apply(null,r),o=function(n){try{console.table({url:t,parameters:JSON.stringify(r),"response(MOCK)":JSON.stringify(n)})}catch(t){}return n};return i(e)?e.then(o):o(e)}}function u(t){var n={};for(var r in t=t||{})Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=c(r,t[r]));return n}function l(t){if(e(t)){var n=t();return i(n)?n.then(u):u(n)}return u(t)}function f(c,u){return f.config(u),function(){var u=n.key,l=n.data,f=n.setPath;const p=Array.prototype.slice.call(arguments);if(a.apply(null,p)){var s=e(f)?f.apply(null,p):void 0;if(r(s)){var y=p[0];o(y)&&y[u]&&(s=y[u]),"string"==typeof y&&t.test(y)&&(s=y)}var d=function(t){var n=t[s];return e(n)?n.apply(null,p):r(n)?c.apply(null,p):n};return i(l)?l.then(d):d(l)}return c.apply(null,p)}}return f.config=(r=>{if(e(r))n.data=l(r);else if(o(r)){var i=!1;for(var a in r)if(Object.prototype.hasOwnProperty.call(r,a)&&t.test(a)){i=!0;break}if(i)return void(n.data=l(r));for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(n[a]=r[a]);n.isProd=e(n.isProd)?n.isProd():!!n.isProd,n.data=l(n.data)}}),f});
