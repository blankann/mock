"use strict";var _excluded=["isProd","data"];require("core-js/modules/es.array.index-of.js"),require("core-js/modules/es.symbol.js"),require("core-js/modules/es.object.define-property.js"),require("core-js/modules/es.array.filter.js"),require("core-js/modules/es.object.get-own-property-descriptor.js"),require("core-js/modules/es.array.for-each.js"),require("core-js/modules/web.dom-collections.for-each.js"),require("core-js/modules/es.object.get-own-property-descriptors.js"),require("core-js/modules/es.object.define-properties.js"),Object.defineProperty(exports,"__esModule",{value:!0}),exports.mock=void 0,require("core-js/modules/es.object.to-string.js"),require("core-js/modules/es.regexp.exec.js"),require("core-js/modules/es.regexp.test.js"),require("core-js/modules/es.regexp.constructor.js"),require("core-js/modules/es.regexp.sticky.js"),require("core-js/modules/es.regexp.to-string.js"),require("core-js/modules/es.string.search.js"),require("core-js/modules/es.json.stringify.js"),require("core-js/modules/es.array.reduce.js"),require("core-js/modules/es.object.keys.js");function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _objectWithoutProperties(a,b){if(null==a)return{};var c,d,e=_objectWithoutPropertiesLoose(a,b);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(d=0;d<f.length;d++)c=f[d],0<=b.indexOf(c)||Object.prototype.propertyIsEnumerable.call(a,c)&&(e[c]=a[c])}return e}function _objectWithoutPropertiesLoose(a,b){if(null==a)return{};var c,d,e={},f=Object.keys(a);for(d=0;d<f.length;d++)c=f[d],0<=b.indexOf(c)||(e[c]=a[c]);return e}var urlReg=/^(?:http[s]?:\/\/\S+?)?\/\S+$/,isUndefined=function(a){return"undefined"==typeof a},isBool=function(a){return"boolean"==typeof a},isString=function(a){return"string"==typeof a},isFunc=function(a){return"function"==typeof a},isObject=function(a){return"[object Object]"===Object.prototype.toString.call(a)},isThenable=function(a){return a&&isFunc(a.then)},getDefaultMock=function(a){try{if(window&&window.location)return new RegExp("[?&]".concat(a)).test(window.location.search)}catch(a){}return!1},shouldMock=function(){var a=config,b=a.isProd,c=a.isMock,d=a.flag;// force close the mock in production mode
return!b&&(isBool(c)?c:isFunc(c)?c.apply(void 0,arguments):getDefaultMock(d));// customize mock
// mock the single request
},logMockResponse=function(a,b){return function(){for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];var f=b.apply(void 0,d),g=function(b){try{console.table({url:a,parameters:JSON.stringify(d),"response(MOCK)":JSON.stringify(b)})}catch(a){}return b};return isThenable(f)?f.then(g):g(f)}},getLogMockResponse=function(a){return Object.keys(a||{}).reduce(function(b,c){return b[c]=logMockResponse(c,a[c]),b},{})},handleLogMockResponse=function(a){if(isFunc(a)){var b=a();return isThenable(b)?b.then(getLogMockResponse):getLogMockResponse(b)}return getLogMockResponse(a)},config={isProd:!1,flag:"__MOCK__",key:"url",data:{}},mock=function(a,b){return isObject(b)&&mock.config(b),function(){for(var b=arguments.length,c=Array(b),d=0;d<b;d++)c[d]=arguments[d];var e=config,f=e.key,g=e.data,h=e.setPath;if(shouldMock.apply(void 0,c)){var j=isFunc(h)?h.apply(void 0,c):void 0;if(isUndefined(j)){var i=c[0];isObject(i)&&i[f]&&(j=i[f]),isString(i)&&urlReg.test(i)&&(j=i)}var k=function(b){return(isFunc(b[j])?b[j]:a).apply(void 0,c)};return isThenable(g)?g.then(k):k(g)}return a.apply(void 0,c)}};exports.mock=mock,mock.config=function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},b=a.isProd,c=void 0===b?config.isProd:b,d=a.data,e=_objectWithoutProperties(a,_excluded);config=_objectSpread(_objectSpread({},config),e),config.isProd=isFunc(c)?c():!!c,d&&(config.data=handleLogMockResponse(d))};